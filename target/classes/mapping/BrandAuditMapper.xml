<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.icei.mapper.BrandAuditMapper">
  <resultMap id="BaseResultMap" type="com.icei.domain.BrandAudit">
    <id column="brand_id" jdbcType="INTEGER" property="brandId" />
    <result column="brand_name" jdbcType="VARCHAR" property="brandName" />
    <result column="brand_photo" jdbcType="VARCHAR" property="brandPhoto" />
    <result column="brand_intro" jdbcType="VARCHAR" property="brandIntro" />
    <result column="audit_name" jdbcType="VARCHAR" property="auditName" />
    <result column="audit_tel" jdbcType="VARCHAR" property="auditTel" />
    <result column="audit_address" jdbcType="VARCHAR" property="auditAddress" />
    <result column="audit_idCad" jdbcType="BIGINT" property="auditIdcad" />
    <result column="audit_idCad_ImgFront" jdbcType="VARCHAR" property="auditIdcadImgfront" />
    <result column="audit_idCad_ImgBack" jdbcType="VARCHAR" property="auditIdcadImgback" />
    <result column="audit_time" jdbcType="TIMESTAMP" property="auditTime" />
    <result column="audit_pass_time" jdbcType="TIMESTAMP" property="auditPassTime" />
    <result column="audit_status_id" jdbcType="INTEGER" property="auditStatusId" />
    <result column="audit_serial" jdbcType="VARCHAR" property="auditSerial" />
    <result column="status_name" jdbcType="VARCHAR" property="statusName" />
  </resultMap>
  <sql id="Base_Column_List">
    brand_id, brand_name, brand_photo, brand_intro, audit_name, audit_tel, audit_address, 
    audit_idCad, audit_idCad_ImgFront, audit_idCad_ImgBack, audit_time, audit_pass_time, 
    audit_status_id, audit_serial
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from brand_audit
    where brand_id = #{brandId,jdbcType=INTEGER}
  </select>
  
  <!-- 查询是否通过审核 -->
  <select id="getAuditSerial" resultMap="BaseResultMap">
  	select 
  	<include refid="Base_Column_List" />,a.status_name
    
    from brand_audit as b,audit_status as a
    
   	where b.audit_status_id=a.status_id 
   		and audit_serial = #{serial}
   		and audit_tel = #{phone}
  </select>
  
  
  <!-- id查询是否处理 -->
  <select id="getBrandStatus" resultType="java.lang.Integer">
  	select audit_status_id
    from brand_audit 
    where brand_id=#{brandId}
  </select>
  <!-- 分页查询 -->
  <select id="getBrandAuditPage" resultMap="BaseResultMap">
  	select 
  	<include refid="Base_Column_List" />,status_name
    
    from brand_audit as b,audit_status as a
    <where>
   	 	b.audit_status_id=a.status_id
   	 	<if test="id != 0 and val != 0">
   	 		<if test="id == 1">
				and audit_tel LIKE '%${val}%'
		    </if>
		    <if test="id == 2">
				and audit_serial LIKE '%${val}%'
		    </if>
	    </if>
	    <if test="statusId != 0">
			and b.audit_status_id=#{statusId}
	    </if>
    </where>
    limit #{page},#{pageSize}
  </select>
  <!-- 查询总条数 -->
  <select id="getCount" resultType="java.lang.Integer">
  	select count(1) from brand_audit
  	<where>
   	 	<if test="id != 0 and val != 0">
   	 		<if test="id == 1">
				and audit_tel LIKE '%${val}%'
		    </if>
		    <if test="id == 2">
				and audit_serial LIKE '%${val}%'
		    </if>
	    </if>
	    <if test="statusId != 0">
			and audit_status_id=#{statusId}
	    </if>
    </where>
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 19 10:27:54 CST 2018.
    -->
    delete from brand_audit
    where brand_id = #{brandId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.icei.domain.BrandAudit">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 19 10:27:54 CST 2018.
    -->
    insert into brand_audit (brand_id, brand_name, brand_photo, 
      brand_intro, audit_name, audit_tel, 
      audit_address, audit_idCad, audit_idCad_ImgFront, 
      audit_idCad_ImgBack, audit_time, audit_pass_time, 
      audit_status_id, audit_serial)
    values (#{brandId,jdbcType=INTEGER}, #{brandName,jdbcType=VARCHAR}, #{brandPhoto,jdbcType=VARCHAR}, 
      #{brandIntro,jdbcType=VARCHAR}, #{auditName,jdbcType=VARCHAR}, #{auditTel,jdbcType=VARCHAR}, 
      #{auditAddress,jdbcType=VARCHAR}, #{auditIdcad,jdbcType=BIGINT}, #{auditIdcadImgfront,jdbcType=VARCHAR}, 
      #{auditIdcadImgback,jdbcType=VARCHAR}, #{auditTime,jdbcType=TIMESTAMP}, #{auditPassTime,jdbcType=TIMESTAMP}, 
      #{auditStatusId,jdbcType=INTEGER}, #{auditSerial,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.icei.domain.BrandAudit">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 19 10:27:54 CST 2018.
    -->
    insert into brand_audit
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="brandId != null">
        brand_id,
      </if>
      <if test="brandName != null">
        brand_name,
      </if>
      <if test="brandPhoto != null">
        brand_photo,
      </if>
      <if test="brandIntro != null">
        brand_intro,
      </if>
      <if test="auditName != null">
        audit_name,
      </if>
      <if test="auditTel != null">
        audit_tel,
      </if>
      <if test="auditAddress != null">
        audit_address,
      </if>
      <if test="auditIdcad != null">
        audit_idCad,
      </if>
      <if test="auditIdcadImgfront != null">
        audit_idCad_ImgFront,
      </if>
      <if test="auditIdcadImgback != null">
        audit_idCad_ImgBack,
      </if>
      <if test="auditTime != null">
        audit_time,
      </if>
      <if test="auditPassTime != null">
        audit_pass_time,
      </if>
      <if test="auditStatusId != null">
        audit_status_id,
      </if>
      <if test="auditSerial != null">
        audit_serial,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="brandId != null">
        #{brandId,jdbcType=INTEGER},
      </if>
      <if test="brandName != null">
        #{brandName,jdbcType=VARCHAR},
      </if>
      <if test="brandPhoto != null">
        #{brandPhoto,jdbcType=VARCHAR},
      </if>
      <if test="brandIntro != null">
        #{brandIntro,jdbcType=VARCHAR},
      </if>
      <if test="auditName != null">
        #{auditName,jdbcType=VARCHAR},
      </if>
      <if test="auditTel != null">
        #{auditTel,jdbcType=VARCHAR},
      </if>
      <if test="auditAddress != null">
        #{auditAddress,jdbcType=VARCHAR},
      </if>
      <if test="auditIdcad != null">
        #{auditIdcad,jdbcType=BIGINT},
      </if>
      <if test="auditIdcadImgfront != null">
        #{auditIdcadImgfront,jdbcType=VARCHAR},
      </if>
      <if test="auditIdcadImgback != null">
        #{auditIdcadImgback,jdbcType=VARCHAR},
      </if>
      <if test="auditTime != null">
        #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditPassTime != null">
        #{auditPassTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditStatusId != null">
        #{auditStatusId,jdbcType=INTEGER},
      </if>
      <if test="auditSerial != null">
        #{auditSerial,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.icei.domain.BrandAudit">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 19 10:27:54 CST 2018.
    -->
    update brand_audit
    <set>
      <if test="brandName != null">
        brand_name = #{brandName,jdbcType=VARCHAR},
      </if>
      <if test="brandPhoto != null">
        brand_photo = #{brandPhoto,jdbcType=VARCHAR},
      </if>
      <if test="brandIntro != null">
        brand_intro = #{brandIntro,jdbcType=VARCHAR},
      </if>
      <if test="auditName != null">
        audit_name = #{auditName,jdbcType=VARCHAR},
      </if>
      <if test="auditTel != null">
        audit_tel = #{auditTel,jdbcType=VARCHAR},
      </if>
      <if test="auditAddress != null">
        audit_address = #{auditAddress,jdbcType=VARCHAR},
      </if>
      <if test="auditIdcad != null">
        audit_idCad = #{auditIdcad,jdbcType=BIGINT},
      </if>
      <if test="auditIdcadImgfront != null">
        audit_idCad_ImgFront = #{auditIdcadImgfront,jdbcType=VARCHAR},
      </if>
      <if test="auditIdcadImgback != null">
        audit_idCad_ImgBack = #{auditIdcadImgback,jdbcType=VARCHAR},
      </if>
      <if test="auditTime != null">
        audit_time = #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditPassTime != null">
        audit_pass_time = #{auditPassTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditStatusId != null">
        audit_status_id = #{auditStatusId,jdbcType=INTEGER},
      </if>
      <if test="auditSerial != null">
        audit_serial = #{auditSerial,jdbcType=VARCHAR},
      </if>
    </set>
    where brand_id = #{brandId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.icei.domain.BrandAudit">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 19 10:27:54 CST 2018.
    -->
    update brand_audit
    set brand_name = #{brandName,jdbcType=VARCHAR},
      brand_photo = #{brandPhoto,jdbcType=VARCHAR},
      brand_intro = #{brandIntro,jdbcType=VARCHAR},
      audit_name = #{auditName,jdbcType=VARCHAR},
      audit_tel = #{auditTel,jdbcType=VARCHAR},
      audit_address = #{auditAddress,jdbcType=VARCHAR},
      audit_idCad = #{auditIdcad,jdbcType=BIGINT},
      audit_idCad_ImgFront = #{auditIdcadImgfront,jdbcType=VARCHAR},
      audit_idCad_ImgBack = #{auditIdcadImgback,jdbcType=VARCHAR},
      audit_time = #{auditTime,jdbcType=TIMESTAMP},
      audit_pass_time = #{auditPassTime,jdbcType=TIMESTAMP},
      audit_status_id = #{auditStatusId,jdbcType=INTEGER},
      audit_serial = #{auditSerial,jdbcType=VARCHAR}
    where brand_id = #{brandId,jdbcType=INTEGER}
  </update>
</mapper>